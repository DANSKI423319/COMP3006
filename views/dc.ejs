<!DOCTYPE html>
<html>

<head>
  <title>Computers-Dev</title>
  <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="custom-styles.css" />
  <script src="https://cdn.socket.io/socket.io-3.0.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="script.js"></script>
  <script src="sockets.js"></script>
</head>

<body style="margin: 20px">

  <div class="row">
  <div class="col-sm-6 container-fluid main-header">
    <h3>Desk Manager</h3>
  </div>
  <div class="col-sm-6 container-fluid main-socket">
    <p id="txtUserCount"></p>
  </div>
</div>

  <br>

  <div class="row">
    <div class="col-sm-3">
      <div class="card">

        <div class="card-header">
          <h5>Create</h5>
        </div>

        <div class="card-body">

          <!-- Add Computer Form -->
          <form method="post" action="/insert" class="insertForm">

            <div class="form-group">
              <label for="addName">Name</label>
              <input type="text" name="addName" id="inputName" class="form-control" maxlength="10"
                placeholder="Type here..." />
            </div>

            <div class="form-group">
              <label for="addStatus">Status</label>
              <select name="addStatus" class="form-control">
                <option>Working</option>
                <option>Not working</option>
                <option>Scheduled for maintenance</option>
                <option>N/A</option>
              </select>
            </div>

            <div class="form-group">
              <label for="addNotes">Notes</label>
              <input type="text" name="addNotes" id="inputNotes" class="form-control" placeholder="Type here..." />
            </div>

            <div class="form-group">
              <label for="addRoom">Room</label>
              <input type="text" name="addRoom" id="inputRoom" class="form-control" placeholder="Type here..." list="rooms"/>
              <datalist id="rooms">
              <% var pcs = [...new Set(computers.map(x => x.room))]; %>
                <% for (i = pcs.length; i >= 0 ; i--) { %>
                    <option><%= pcs[i] %></option>
                    <% if (i == (pcs.length - 3)) { { break } } %>
                  <% } %>
              </datalist>
            </div>

            <input type="submit" id="btnComputerAdd" class="form-control btn btn-primary" value="Create" />

          </form>

        </div>
      </div>

      <br>

      <div class="card">

        <div class="card-header">
          <h5>Query</h5>

        </div>

        <div class="card-body">

          <!-- Query Filter Form -->
          <form method="post" action="/filter">

            <div class="row">
              <div class="col">
                <select name="filterCategory" class="form-control">
                  <option>name</option>
                  <option>status</option>
                  <option>room</option>
                </select>
              </div>

              <div class="col">
                <input type="text" name="filterSearch" class="form-control" placeholder="Search..." />
              </div>
            </div>

            <br>

            <div class="row">
              <div class="col">
                <input type="submit" class="form-control btn btn-secondary" value="Query" />
              </div>
            </div>

          </form>

        </div>
      </div>
    </div>

    <!-- Computer Table -->
    <div id="padded-box" class="col-sm-6 border border-secondary rounded">

      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text">Search</span>
        </div>
        <input type="text" id="search" class="form-control">
      </div>

      <table class="table" id="main-table">

        <thead class="thead-dark">
          <tr>
            <th>Computer ID</th>
            <th>Name</th>
            <th>Status</th>
            <th>Notes</th>
            <th>Room</th>
            <th></th>
          </tr>
        </thead>

        <tbody id="tblComputers">
          <% for (i=0; i < computers.length; i++) { %>
            <tr>
              <td id="id"><%= computers[i]._id %></td>
              <td id="name"><%= computers[i].name %></td>
              <td id="status"><%= computers[i].status %></td>
              <td id="notes"><%= computers[i].notes %></td>
              <td id="room"><%= computers[i].room %></td>
              <td><button class="getPC">Update</button></td>
            </tr>
            <% } %>
        </tbody>

      </table>

      <a href="/dc"><input type="button" class="btn btn-success" value="Refresh" /></a>

    </div>

    <div class="col-sm-3">
      <div class="card">

        <!-- Update room form -->
        <div class="card-header">
          <h5>Update</h5>
        </div>

        <div class="card-body">

          <form method="post" action="/update" class="updateForm">

            <div class="form-group">
              <label for="searchId">Computer ID</label>
              <input type="text" id="txtSearch" name="searchId" class="form-control border border-danger"
                title="Do not edit this field" disabled />
            </div>

            <div class="form-group">
              <label for="updateName">Name</label>
              <input type="text" id="txtName" name="updateName" class="form-control" disabled />
            </div>

            <div class="form-group">
              <label for="updateStatus">Status</label>
              <select id="txtStatus" name="updateStatus" class="form-control" disabled>
                <option>Working</option>
                <option>Not working</option>
                <option>Scheduled for maintenance</option>
                <option>N/A</option>
              </select>
            </div>

            <div class="form-group">
              <label for="updateNotes">Notes</label>
              <input type="text" id="txtNotes" name="updateNotes" class="form-control" disabled />
            </div>

            <div class="form-group">
              <label for="updateRoom">Room</label>
              <input type="text" id="txtRoom" name="updateRoom" class="form-control" disabled />
            </div>

            <input type="submit" id="btnUpdate" class="form-control btn btn-warning" value="Update" disabled />

          </form>

          <br>

          <!-- Remove computer form -->
          <form method="post" action="/remove" class="remove-box">

            <div class="form-group">

              <div class="row">
                <div class="col-sm-8">
                  <input type="text" name="removeInput" id="txtRemove" class="form-control border border-danger" title="Do not edit this field" disabled />
                </div>
                <div class="col-sm-4">
                  <input type="text" id="txtRemoveName" class="form-control" disabled />
                </div>
              </div>

            </div>

            <div class="row">

              <div class="col">
                <input type="submit" id="btnRemove" class="form-control btn btn-danger" value="Remove" title="This cannot be undone" disabled />
              </div>

              <div class="col">
                <div class="form-control">
                  <div class="form-check" id="form-checkbox">
                    <input class="form-check-input" type="checkbox" name="checkbox" id="cbRemove" disabled>
                    <label class="form-check-label" for="checkbox">Are you sure?</label>
                  </div>
                </div>
              </div>
            </div>

          </form>

        </div>
      </div>
    </div>
  </div>

  <br>

 <!-- Error message -->
 <p id="errorMsg" style="color: crimson"></p>

  <!-- Websockets -->
  <ul id="messages"></ul>
  <p id="socketMsg"></p>

</body>

</html>